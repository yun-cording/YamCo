<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
 PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
 "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="u_recipe">
	<!-- 조회수 기준 상위 30개 가져오기 -->
	<select id="rankListRecipe" resultType="urmvo">
		select * from
		u_recipe_metadata
		order by u_rcp_hit desc LIMIT 30
	</select>
	
	<!-- 검색어로 결과 rcp_idx 가져오기 -->
	<select id="recipeSearch" parameterType="Map" resultType="urmvo">
		select * from u_recipe_metadata where u_rcp_title like CONCAT('%',#{search},'%') or u_rcp_category like CONCAT('%',#{search},'%') or u_rcp_ing like CONCAT('%',#{search},'%')
		order by
		<if test="order == 0 or order==null"> u_rcp_hit </if>
		<if test="order == 1"> avg_grade </if>
		desc
	</select>
	
</mapper>